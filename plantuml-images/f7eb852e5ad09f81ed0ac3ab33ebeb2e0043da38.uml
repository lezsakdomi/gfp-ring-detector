@startuml
!include https://raw.githubusercontent.com/ptrkcsk/one-dark-plantuml-theme/v1.0.0/theme.puml

[*] -[dotted]-> list: Alap√©rtelmezetten\nmegny√≠lik a b√∂ng√©sz≈ëben
list --> analyze: F√°jlra kattintunk

state "F√°jlok list√°z√°sa" as list #blue {
    [*] -[dotted]-> noFilter
    noFilter --> filtered
    filtered --> filtered
    state "Keres≈ëmez≈ë √ºres" as noFilter: Nincs boxplot
    state "Sz≈±r≈ëfelt√©tel megadva" as filtered: Van boxplot
}
list: Van lehet≈ës√©g keres≈ëvel sz≈±rni

state "Analiz√°l√°s" as analyze #blue {
    state "F√°jl ismeretlen" as fileUnknown #blue
    state "F√°jl kiv√°lasztva" as fileKnownAndAnalyzing #blue {
        state connected {
            state analyzing1 {
                state got1inputs
                state got1outputs
                state got1error #darkRed
            
                [*] -[dotted]> got1inputs: üñß
                got1inputs -[dotted]> got1outputs: üñß
                got1outputs -[dotted]> [*]: üñß
                got1inputs -[dotted]-> got1error: üñß
            }
                    
            state analyzing2 {
                state got2inputs
                state got2outputs
                state got2error #darkRed
            
                [*] -[dotted]> got2inputs: üñß
                got2inputs -[dotted]> got2outputs: üñß
                got2outputs -[dotted]> [*]: üñß
                got2inputs -[dotted]-> got2error: üñß
            }
        
            state analyzing3 {
                state got3inputs
                state got3outputs
                state got3error #darkRed
            
                [*] -[dotted]> got3inputs: üñß
                got3inputs -[dotted]> got3outputs: üñß
                got3outputs -[dotted]> [*]: üñß
                got3inputs -[dotted]-> got3error: üñß
            }
                
            [*] -[dotted]-> analyzing1: üñß
            analyzing1 -[dotted]-> analyzing2: üñß
            analyzing2 -[dotted]-> analyzing3: üñß
            analyzing3 -[dotted]-> [*]: üñß
        }
        
        state wsError #darkRed
        
        [*] -[dotted]-> connected
        'connected -[dotted]-> [*]: üñß
        connected -[dotted]-> wsError: üñß
    }

    fileUnknown -[dotted]-> fileKnownAndAnalyzing: F√°jln√©v bek√©r√©se\nfelugr√≥ ablakban
    [*] -[dotted]-> fileKnownAndAnalyzing

    ||

    state "F√°zis ismeretlen" as phaseUnknown #blue
    state "F√°zis kiv√°lasztva" as phaseSelected #blue: ""load"" / ""clean"" / stb...
    state "F√°zis √©s szekci√≥ kiv√°lasztva" as sectionSelected #blue: bemenet / kimenet (als√≥ vagy fels≈ë)

    [*] -[dotted]> phaseUnknown
    phaseUnknown -[hidden]-> phaseSelected
    phaseSelected --> sectionSelected: F√ºl lenyit√°sa
    
    phaseUnknown ---> sectionSelected: F√ºl lenyit√°sa

    phaseUnknown -[dashed]--> sectionSelected: Koordin√°t√°k kiv√°laszt√°sa

    ||
    
    state "K√©pkimenet ismeretlen" as outputUnknown #blue
    state "K√©pkimenet kiv√°lasztva" as outputSelected #blue: DsRed / GFP / DAPI / ...
    
    [*] -[dotted]> outputUnknown
    outputUnknown --> outputSelected: F√ºl lenyit√°sa

    outputUnknown -[dashed]--> outputSelected: Koordin√°t√°k kiv√°laszt√°sa
    outputSelected -[dashed]--> outputUnknown: Koordin√°t√°k t√∂rl√©se

    --

    state "C√©lkereszt az eg√©rn√©l" as hover {
        state "K√©p teljes m√©retben" as zoomUnknown #blue
        state "K√©p nagy√≠tva" as zoomSelected #blue

        [*] -[dotted]> zoomUnknown
        zoomUnknown -> zoomSelected: G√∂rget√©s
        zoomSelected -> zoomSelected: G√∂rget√©s

        --

        state "K√©p a keretben" as movedUnknown
        state "K√©p elmozgatva" as movedSelected

        [*] -[dotted]> movedUnknown
        movedUnknown -> movedSelected: Arr√©bbh√∫z√°s
        movedSelected -> movedSelected: Arr√©bbh√∫z√°s

        --

        state "Koordin√°t√°k t√∂r√∂lve" as coordinatesUnknown #blue
        state spacePressed <<choice>>
        state "Koordin√°t√°k kiv√°lasztva" as coordinatesSelected #blue

        [*] -r-> coordinatesUnknown
        coordinatesUnknown --> coordinatesSelected: "space"
        coordinatesSelected -r-> spacePressed: "space"
        spacePressed -l-> coordinatesSelected: random helyen
        spacePressed -l-> coordinatesUnknown: ugyanott mint\naz el≈ëbb

        --

        state "V√∂r√∂s csatorna be√°ll√≠tva" as redSelected
        [*] -> redSelected: "r"
        redSelected -> redSelected: "r"

        --

        state "Z√∂ld csatorna be√°ll√≠tva" as greenSelected
        [*] -> greenSelected: "g"
        greenSelected -> greenSelected: "g"

        --

        state "K√©k csatorna be√°ll√≠tva" as blueSelected
        [*] -> blueSelected: "b"
        blueSelected -> blueSelected: "b"

        --

        state "RGB el≈ën√©zet becsukva" as compositePreviewCollapsed
        state "RGB el≈ën√©zet kinyitva" as compositePreviewOpen
        
        [*] -[dotted]> compositePreviewCollapsed
        compositePreviewCollapsed -> compositePreviewOpen: F√ºl lenyit√°sa
        compositePreviewOpen -> compositePreviewCollapsed: F√ºl becsuk√°sa
        compositePreviewCollapsed -[dashed]> compositePreviewOpen: "r" | "g" | "b"
        
        --
        
        state "V√∂r√∂s csatorna l√°that√≥" as redVisible
        state "V√∂r√∂s csatorna nem l√°that√≥" as redInvisible
        
        [*] -[dotted]> redVisible
        redVisible -> redInvisible: "shift" + "R"
        redInvisible -> redVisible: "shift" + "R"
    
        --
        
        state "Z√∂ld csatorna l√°that√≥" as greenVisible
        state "Z√∂ld csatorna nem l√°that√≥" as greenInvisible
        
        [*] -[dotted]> greenVisible
        greenVisible -> greenInvisible: "shift" + "G"
        greenInvisible -> greenVisible: "shift" + "G"
    
        --
        
        state "K√©k csatorna l√°that√≥" as blueVisible
        state "K√©k csatorna nem l√°that√≥" as blueInvisible
        
        [*] -[dotted]> blueVisible
        blueVisible -> blueInvisible: "shift" + "B"
        blueInvisible -> blueVisible: "shift" + "B"
    }

    state "C√©lkereszt a kiv√°lasztott helyen" as noHover

    noHover --> hover: R√°vissz√ºk az\negeret egy k√©pre
    hover --> noHover: Levissz√ºk az egeret a k√©pr≈ël
}

@enduml